# Release v1.2

## What's New (App Store)

```
Completion Confirmation (Plus)
Stopping an alarm no longer marks it done. Plus subscribers now get a confirmation step — stop the sound first, then decide: mark as done or snooze for later. Your completion history stays accurate.

Also in this update:
- Past-due alarms now fire with full sound instead of showing a passive overdue badge
- In-app viewer for FAQ, Privacy Policy, and Terms of Service
- Delivered notifications now clear on all alarm completion paths
- Fixed pending confirmation badge not updating immediately after tap
```

## Promotional Text

```
Completion confirmation for Plus — stop the alarm, then decide if it's really done.
```

## Internal Release Notes

**Version:** 1.2 (build 1)
**Commits since v1.1:** 11
**Branch:** main

### Changes

| Commit  | Description                                                                            |
| ------- | -------------------------------------------------------------------------------------- |
| 9089926 | fix(web): design review fixes for design-tokens docs app                               |
| 25393b9 | feat(ios): add in-app viewer for FAQ, Privacy Policy, and Terms of Service             |
| 717760b | fix(ios): clear delivered notifications on all alarm completion paths                  |
| 0eb4b5e | fix(ios): [FEAT-04] use @State set for immediate pending badge clear on button tap     |
| cfb536f | fix(ios): [FEAT-04] force row identity change on pending state to clear stale badge    |
| 10e3319 | fix(ios): [FEAT-04] force SwiftData re-render on pending confirmation, update QA       |
| 1207ba7 | docs: add pending confirmation screen to design tokens web app, update QA              |
| 5b5ddf1 | fix(ios): [FEAT-04] firing screen time text scaling, swipe-to-confirm in category view |
| 8154837 | fix(ios): keep firing view up when alarm is still past-due on foreground return        |
| fd12a98 | feat(ios): [FEAT-04] completion confirmation — stop != done for Plus tier              |
| 3b1819d | Remove overdue state: fire past-due alarms instead of showing passive badge            |

### Features

- **Completion Confirmation (FEAT-04)** — Plus tier: stopping an alarm enters a pending confirmation state. User must explicitly mark as done or snooze. Prevents accidental completions and keeps history accurate.
- **In-app legal viewer** — FAQ, Privacy Policy, and Terms of Service now open in an in-app viewer instead of Safari

### Bug Fixes

- **Past-due alarms now fire** — Removed passive overdue badge; past-due alarms fire with full sound and full-screen alert
- **Notification cleanup** — Delivered notifications now clear on all alarm completion paths (dismiss, mark done, lock screen stop)
- **Pending badge refresh** — Fixed stale badge rendering after confirmation tap via identity change and @State optimization

### Improvements

- Firing screen time text scales properly on smaller devices
- Swipe-to-confirm works in category grouped view
- Firing view stays up when alarm is still past-due on foreground return
- Design tokens docs app visual fixes
